<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.work.shop.dao.ChannelStockLogSearchMapper">
  <resultMap id="BaseResultMap" type="com.work.shop.vo.ChannelStockLogVO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="log_id" jdbcType="INTEGER" property="logId" />
    <result column="channel_code" jdbcType="VARCHAR" property="channelCode" />
    <result column="shop_code" jdbcType="VARCHAR" property="shopCode" />
    <result column="sku_sn" jdbcType="VARCHAR" property="skuSn" />
    <result column="return_code" jdbcType="VARCHAR" property="returnCode" />
    <result column="return_message" jdbcType="VARCHAR" property="returnMessage" />
    <result column="ip_address" jdbcType="VARCHAR" property="ipAddress" />
    <result column="user" jdbcType="VARCHAR" property="user" />
    <result column="request_time" jdbcType="TIMESTAMP" property="requestTime" />
    <result column="stock" jdbcType="INTEGER" property="stock" />
    <result column="channel_title" jdbcType="VARCHAR" property="channelTitle" />
    <result column="shop_title" jdbcType="VARCHAR" property="shopTitle" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    log_id, channel_code, shop_code, sku_sn, return_code, return_message, ip_address, 
    user, request_time, stock
  </sql>



 
  <select id="selectVOByExample" resultMap="BaseResultMap" parameterType="java.util.Map" >
	SELECT
    log_id,cal.channel_code,channel_title,shop_title,cal.shop_code, sku_sn, return_code, return_message, ip_address, 
    `user`, request_time, stock
			FROM
				channel_stock_log cal
	LEFT JOIN channel_info ci ON cal.channel_code = ci.chanel_code
	LEFT JOIN channel_shop cs ON cal.shop_code = cs.shop_code
				
			WHERE
				1=1 
				<if test="channel_code != null" >
					AND cal.channel_code = #{channel_code,jdbcType=VARCHAR}
				</if>
				<if test="shop_code != null" >
					AND cal.shop_code = #{shop_code,jdbcType=VARCHAR}
				</if>
				<if test="sku_sn != null" >
					AND sku_sn like #{sku_sn,jdbcType=VARCHAR}
				</if>
				
				<if test="return_code != null" >
				
				    <if test="return_code != 0" >
						AND return_code != 0
					</if>
					<if test="return_code == 0" >
						AND return_code = 0
					</if>
				
				</if>
				
				<if test="begin_Time != null" >
				
					AND <![CDATA[ request_time >= ]]>  #{begin_Time,jdbcType=TIMESTAMP}  
				</if>
				<if test="end_Time != null" >
				
				AND	<![CDATA[ request_time <=  ]]> #{end_Time,jdbcType=TIMESTAMP}  
					
				</if>
				
				ORDER BY request_time DESC
				LIMIT #{start},#{limit}
  </select>

</mapper>